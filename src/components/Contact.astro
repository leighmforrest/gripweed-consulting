---
import Section from "./Section.astro";
---

<Section sectionId="contact">
  <div class="grid grid-cols-1 md:grid-cols-2 min-h-screen gap-4 p-4">
    <div class="flex flex-col p-4 h-full">
      <h2
        class="text-4xl text-vermillion dark:text-dark-vermillion text-center"
      >
        Get In Touch
      </h2>
      <p class="mt-4 text-center">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Magnam ad
        tempore odit praesentium ipsa assumenda nisi odio eius amet! Rerum
        deleniti, quo sit cumque maiores dolor vitae veritatis doloribus
        consequuntur? Maxime quas alias ex ab quae nulla sint hic, voluptates
        quibusdam dolores doloribus dolore aliquam sapiente vero ea omnis
        possimus dolor libero ad sit laudantium nam. Nesciunt, asperiores dolor
        explicabo, architecto suscipit porro dolorum laborum nostrum unde beatae
        voluptate iure ullam commodi labore quis fugit corrupti quibusdam atque
        laudantium repellat aspernatur! Possimus officiis ut ipsam impedit ipsum
        reiciendis eaque omnis excepturi? Quae aut voluptatibus quas consectetur
        quia quibusdam culpa asperiores?
      </p>
    </div>
    <form
      class="flex flex-col rounded-xl shadow-md border border-gray-400 dark:border-gray-500 p-4 h-full"
    >
      <h2
        class="text-4xl text-vermillion dark:text-dark-vermillion text-center"
      >
        Contact Us
      </h2>
      <div class="flex flex-col mt-4">
        <label
          for="fullName"
          class="block mb-2 text-md font-medium text-gray-900 dark:text-gray-400"
        >
          Full Name
        </label>
        <input
          type="text"
          name="fullName"
          placeholder="Full Name"
          class="w-full p-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-vermillion dark:focus:ring-special-yellow focus:border-transparent text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-700"
        />
      </div>
      <div class="flex flex-col mt-4">
        <label
          for="address"
          class="block mb-2 text-md font-medium text-gray-900 dark:text-gray-400"
        >
          Email Address
        </label>
        <input
          type="text"
          name="address"
          placeholder="Email Address"
          class="w-full p-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-vermillion dark:focus:ring-special-yellow focus:border-transparent text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-700"
        />
      </div>
      <div class="flex flex-col mt-4">
        <label
          for="message"
          class="block mb-2 text-md font-medium text-gray-900 dark:text-gray-400"
        >
          Your message
        </label>
        <textarea
          name="message"
          rows="6"
          placeholder="Your message..."
          class="w-full p-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-vermillion dark:focus:ring-special-yellow focus:border-transparent text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-700 resize-none"
        ></textarea>
      </div>
      <div class="flex justify-end mt-4">
        <button
          id="submitContact"
          type="submit"
          class="px-6 py-3 bg-vermillion text-white font-medium rounded-lg shadow hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-vermillion focus:dark:ring-special-yellow"
        >
          Send
        </button>
      </div>
    </form>
  </div>
</Section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    const contactForm = document.querySelector("form");

    contactForm?.addEventListener("submit", (event) => {
      event.preventDefault();
      
      const requiredFields = ["fullName", "address", "message"];

      // Validation
      const form = new FormData(contactForm);

      // convert FormData to a plain object
      const formValues = Object.fromEntries(form.entries())

      // Trim all string values
      for (const key in formValues) {
        if (requiredFields.includes(key)) {
            formValues[key] = formValues[key].toString().trim()
        } else {
            console.log("This field is invalid");
            delete formValues[key]
        }
      }

      // validate required fields
      for (const field of requiredFields) {
        if (!formValues[field]) {
            alert(`Please fill out the ${field}`);
            return;
        }
      }

      console.log(formValues)
    });
  });
</script>
